/*
 * bootstrap-tagsinput v0.3.9 by Tim Schlechter
 * 
 */

!function(a){"use strict";function b(b,c){this.itemsArray=[],this.$element=a(b).hide(),this.$element.attr("multiselect","multiselect").find("options").attr("selected","selected");var d=c.placeholder||"";this.$container=a('<div class="bootstrap-tagsinput"/>'),this.inputSize=Math.max(1,d.length),this.$input=a('<input type="text" placeholder="'+d+'"/>').appendTo(this.$container),this.$element.after(this.$container),this.build(c),this._refreshSize()}function c(a,b){if("function"!=typeof a[b]){var c=a[b];a[b]=function(a){return a[c]}}}function d(a){return a?g.text(a).html():""}function e(a){if(document.selection){a.focus();var b=document.selection.createRange();return b.moveStart("character",-a.value.length),b.text.length}return a.selectionStart||"0"==a.selectionStart?a.selectionStart:0}var f={tagClass:function(){return"label label-info"},itemValue:"value",itemText:"value",freeInput:!1,confirmKeys:[13]};b.prototype={constructor:b,FreeObject:null,allowedItems:null,_getValue:function(a){return"object"!=typeof a&&(a=this._getItemByText(a)),a[this.options.itemValue]},_getText:function(a){return"object"!=typeof a&&(a=this._getItemByValue(a)),a[this.options.itemText]},_getItemByText:function(a){if(this.options.freeInput)return new this.FreeObject(a);var b=this.options.itemText;return this.allowedItems.filter(function(c){return c[b]===a})[0]},_getItemByValue:function(a){if(this.options.freeInput)return this.FreeObject(a);var b=this.options.itemValue;return this.allowedItems.filter(function(c){return c[b]===a})[0]},_getClass:function(a){return d(this.options.tagClass(a))},_getTagEl:function(a){return this.$container.find('.tag[data-value="'+a+'"]')},_getOptionEl:function(a){return this.$element.find('option[value="'+a+'"]')},_createTag:function(b,c,e){var f='<span class="tag" data-value="'+c+'">'+d(e)+'<span data-role="remove"></span></span>';return a(f).addClass(this._getClass(b))},_createOption:function(b,c){var e="<option selected>"+d(c)+"</option>";return a(e).attr("value",b)},_add:function(a){if(null!=a){var b,c=this,d=this._getText(a),e=this._getValue(a),f=(this._getClass(a),this.itemsArray.some(function(a){return c._getValue(a)===e}));if(f)return void this._getTagEl(e).hide().fadeIn();this.itemsArray.push(a),b=this._createTag(a,e,d),this._getInputWrapper().before(b),b.after(" "),0===this._getOptionEl(e).length&&this.$element.append(this._createOption(e,d))}},_emitChange:function(a,b){this.$element.trigger("change"),a&&this.$element.trigger("item"+a,{item:b})},_getInputWrapper:function(){for(var b=this.$input[0],c=this.$container[0];b&&b.parentNode!==c;)b=b.parentNode;return a(b)},_refreshSize:function(){var a=this.$input[0],b=Math.max(this.inputSize<3?3:this.inputSize,a.value.length);a.style.setProperty("width",b+"em","important")},add:function(a){var b="object"==typeof a?a:this._getItemByText(a.trim());this._add(b),this._emitChange("Added",b)},addByValue:function(a){var b=this._getItemByValue(a);this._add(b),this._emitChange("Added",b)},remove:function(a){var b=this,c=this._getText(a),d=this._getItemByValue(a);return null==c||null==d?void console.warn("<tag:remove> Item text is not defined",a):(this._getTagEl(a).remove(),this._getOptionEl(a).remove(),this.itemsArray=this.itemsArray.filter(function(c){return b._getValue(c)!==a}),void this._emitChange("Removed",d))},removeAll:function(){this.$container.find(".tag").remove(),this.$element.find("option").remove(),this.itemsArray.length=0,this._emitChange()},items:function(){return this.itemsArray},build:function(b){this.allowedItems=b.allowedItems||[],this.options=a.extend({},f,b);var d=this.options.typeahead||{},g=this.options.itemText,h=this.options.itemValue,i=this;this.FreeObject=function(a){this[g]=a,this[h]=a},this.FreeObject.prototype[g]=null,this.FreeObject.prototype[h]=null,c(this.options,"tagClass"),i.$container.on("click",function(){i.$input.focus()}).on("keydown","input",function(b){var c=a(b.target),d=i._getInputWrapper();switch(b.which){case 8:if(0===e(c[0])){var f=d.prev();0!==f.length&&i.remove(f.data("value"))}break;case 46:if(0===e(c[0])){var g=d.next();0!==g.length&&i.remove(g.data("value"))}break;case 37:var h=d.prev();0===c.val().length&&h[0]&&(h.before(d),c.focus());break;case 39:var j=d.next();0===c.val().length&&j[0]&&(j.after(d),c.focus());break;default:-1!==i.options.confirmKeys.indexOf(b.which)&&(b.preventDefault(),b.stopPropagation(),i.add(c.val()),c.val(""),i.$typeahead&&i.$typeahead.typeahead("close").typeahead("val",""))}i._refreshSize()}).on("click","[data-role=remove]",function(){i.remove(a(this).closest(".tag").data("value"))}),d.source&&a.fn.typeahead&&(this.$typeahead=i.$input.typeahead({hint:!0,highlight:!0,minLength:1},{displayKey:g,source:function(a,b){d.source(a,function(a){i.allowedItems=i.allowedItems.concat(a.filter(function(a){return-1===i.allowedItems.indexOf(a)})),b(a)})}})),this.options.items&&this.options.items.forEach(function(a){i._add(a,!0)})},destroy:function(){this.$container.off("keypress","input").off("click","[role=remove]").remove(),this.$element.removeData("tagsinput").show()},focus:function(){this.$input.focus()},input:function(){return this.$input}},a.fn.tagsinput=function(c,d){var e=[];return this.each(function(){var f=a(this),g=f.data("tagsinput");return null==g?(g=new b(this,c),f.data("tagsinput",g),void e.push(g)):void e.push(g[c](d))}),"string"==typeof c?e.length>1?e:e[0]:e},a.fn.tagsinput.Constructor=b;var g=a("<div />")}(window.jQuery);
//# sourceMappingURL=bootstrap-tagsinput.min.js.map